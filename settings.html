<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –§–∞–Ω—Ñ–∏–∫–∞</title>
  <style>
    body {
      background-color: #121212;
      color: #f5f5f5;
      font-family: sans-serif;
      padding: 40px 20px;
      margin: 0;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .form-container {
      max-width: 700px;
      margin: 0 auto;
    }

    label {
      display: block;
      margin-top: 20px;
      font-size: 18px;
    }

    input {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      box-sizing: border-box;
      border: none;
      border-radius: 8px;
      background-color: #1e1e1e;
      color: white;
      font-size: 16px;
    }

    button {
      margin-top: 30px;
      padding: 15px 30px;
      font-size: 18px;
      background-color: #03a9f4;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }

    .output {
      margin-top: 40px;
      background-color: #1e1e1e;
      padding: 25px;
      border-radius: 10px;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 24px;
      }
      label {
        font-size: 16px;
      }
      input, button {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–Ω—Ñ–∏–∫–∞</h1>

  <div class="form-container">
    <label>–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–æ–±—ã—Ç–∏—è?</label>
    <input type="text" id="when" />

    <label>–ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–æ–±—ã—Ç–∏—è?</label>
    <input type="text" id="where" />

    <label>–ß—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞–ª–∏?</label>
    <input type="text" id="what" />

    <label>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–≥–æ?</label>
    <input type="text" id="twist" />

    <label>–ö–∞–∫ –æ–Ω–∏ –æ—Ç—Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∏?</label>
    <input type="text" id="reaction" />

    <label>–ß—Ç–æ –æ–Ω–∏ —Å–¥–µ–ª–∞–ª–∏ –≤ –∫–æ–Ω—Ü–µ?</label>
    <input type="text" id="final" />

    <button onclick="generateFanfic()">–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–Ω—Ñ–∏–∫</button>

    <div id="output" class="output"></div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const rawC1 = params.get('c1');
    const rawC2 = params.get('c2');

    function decline(name, form) {
      const cases = {
        "–°–µ—Ä–≥–µ–∏—á": { gen: "–°–µ—Ä–≥–µ–∏—á–∞", dat: "–°–µ—Ä–≥–µ–∏—á—É", acc: "–°–µ—Ä–≥–µ–∏—á–∞", ins: "–°–µ—Ä–≥–µ–∏—á–µ–º", abl: "–æ –°–µ—Ä–≥–µ–∏—á–µ", short: "–°–µ—Ä–≥–µ–∏—á" },
        "–ö–æ–ª—è –í–µ–Ω–¥–∏–Ω": { gen: "–ö–æ–ª–∏ –í–µ–Ω–¥–∏–Ω–∞", dat: "–ö–æ–ª–µ –í–µ–Ω–¥–∏–Ω—É", acc: "–ö–æ–ª—é –í–µ–Ω–¥–∏–Ω–∞", ins: "–ö–æ–ª–µ–π –í–µ–Ω–¥–∏–Ω—ã–º", abl: "–æ –ö–æ–ª–µ –í–µ–Ω–¥–∏–Ω–µ", short: "–ö–æ–ª—è" },
        "–°–∫—Ä—ã–≥–∞–Ω": { gen: "–°–∫—Ä—ã–≥–∞–Ω–∞", dat: "–°–∫—Ä—ã–≥–∞–Ω—É", acc: "–°–∫—Ä—ã–≥–∞–Ω–∞", ins: "–°–∫—Ä—ã–≥–∞–Ω–æ–º", abl: "–æ –°–∫—Ä—ã–≥–∞–Ω–µ", short: "–°–∫—Ä—ã–≥–∞–Ω" },
        "–ü–∏–ª–µ–ø–µ–Ω–∫–æ": { gen: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", dat: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", acc: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", ins: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", abl: "–æ –ü–∏–ª–µ–ø–µ–Ω–∫–æ", short: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ" },
        "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–∞": { gen: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω—ã", dat: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–µ", acc: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω—É", ins: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–æ–π", abl: "–æ –ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–µ", short: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–∞" }
      };
      return cases[name]?.[form] || name;
    }

    function getOtherCharacter(c1, c2) {
      const all = ["–°–µ—Ä–≥–µ–∏—á", "–ö–æ–ª—è –í–µ–Ω–¥–∏–Ω", "–°–∫—Ä—ã–≥–∞–Ω", "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–∞"];
      return all.find(name => name !== c1 && name !== c2);
    }

    function generateFanfic() {
      const when = document.getElementById("when").value.trim();
      const where = document.getElementById("where").value.trim();
      const what = document.getElementById("what").value.trim();
      const twist = document.getElementById("twist").value.trim();
      const reaction = document.getElementById("reaction").value.trim();
      const final = document.getElementById("final").value.trim();

      if (!when || !where || !what || !twist || !reaction || !final) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
        return;
      }

      const c1 = rawC1;
      const c2 = rawC2;
      const c3 = getOtherCharacter(c1, c2);

      const c1_short = decline(c1, 'short');
      const c2_short = decline(c2, 'short');
      const c3_ins = decline(c3, 'ins');
      const c1_acc = decline(c1, 'acc');
      const c2_acc = decline(c2, 'acc');

      const templates = [
        `üìñ ${when}, –≤ ${where}, ${c1_short} –∏ ${c2_short} —Ä–µ—à–∏–ª–∏ ${what}. –≠—Ç–æ –±—ã–ª–æ –Ω–∞—á–∞–ª–æ–º —Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –∏ –≥–ª—É–±–æ–∫–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞–≤—Å–µ–≥–¥–∞ –∏–∑–º–µ–Ω–∏–ª–æ –∏—Ö –∂–∏–∑–Ω–∏.

–°–Ω–∞—á–∞–ª–∞ –≤—Å—ë —à–ª–æ –∫–∞–∫ –æ–±—ã—á–Ω–æ ‚Äî –ª—ë–≥–∫–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã, –ø—Ä–∏–≤—ã—á–Ω—ã–µ —à—É—Ç–∫–∏. –ù–æ –ø–æ—Ç–æ–º —Å–ª—É—á–∏–ª–æ—Å—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ: ${twist}. –≠—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –ø–æ–≤–µ—Ä–≥ –æ–±–æ–∏—Ö –≤ –∑–∞–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ.

‚Äî –¢—ã —ç—Ç–æ –≤–∏–¥–µ–ª? ‚Äî –≤—ã–¥–æ—Ö–Ω—É–ª ${c1_short}, –ø–µ—Ä–µ–≥–ª—è–Ω—É–≤—à–∏—Å—å —Å ${c2_short}.
‚Äî –Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç‚Ä¶ ‚Äî –ø—Ä–æ–±–æ—Ä–º–æ—Ç–∞–ª ${c2_short}, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ —É–∂–µ —á—Ç–æ-—Ç–æ –º–µ–Ω—è–ª–æ—Å—å.

${reaction}

–ü–æ–∑–∂–µ ${c3_ins} –ø–æ–¥–æ—à—ë–ª, –≤–∑–≥–ª—è–Ω—É–ª –Ω–∞ –Ω–∏—Ö –∏ —Ç–æ–ª—å–∫–æ —Å–∫–∞–∑–∞–ª: ¬´–í–æ—Ç —ç—Ç–æ –ø–æ–≤–æ—Ä–æ—Ç¬ª. –ò –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ ‚Äî –≤—Å—ë —Å—Ç–∞–ª–æ –∏–Ω–∞—á–µ.

–í —Ñ–∏–Ω–∞–ª–µ: ${final}. –ò —ç—Ç–æ –±—ã–ª–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ–º.`,

        `‚ú® ${when}, ${where} –±—ã–ª –Ω–∞–ø–æ–ª–Ω–µ–Ω –∑–≤—É–∫–∞–º–∏ ${what}. ${c1_short} –∏ ${c2_short} –Ω–µ –∑–∞–º–µ—á–∞–ª–∏ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞. –ò –≤–¥—Ä—É–≥ ‚Äî ${twist}.

–≠—Ç–æ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É–ª–æ –≤—Å—ë. –ò—Ö —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ç—Ä–µ—Å–Ω—É–ª–∞, –∞ –º–∞—Å–∫–∏ —É–ø–∞–ª–∏. –í –≥–ª—É–±–∏–Ω–µ –¥—É—à–∏ –∫–∞–∂–¥—ã–π –∑–Ω–∞–ª, —á—Ç–æ –¥–∞–ª—å—à–µ –≤—Å—ë –±—É–¥–µ—Ç –∏–Ω–∞—á–µ.

${reaction}

–û–Ω–∏ –¥–æ–ª–≥–æ —Å–∏–¥–µ–ª–∏ –º–æ–ª—á–∞. ${c1_short} –ø–æ—Å–º–æ—Ç—Ä–µ–ª –Ω–∞ ${c2_acc} –∏ —Å–∫–∞–∑–∞–ª:
‚Äî –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –±—ã–ª —Ä—è–¥–æ–º. –ò –∑–∞ —Ç–æ, —á—Ç–æ –æ—Å—Ç–∞–ª—Å—è.

–ö–æ–≥–¥–∞ –≤—Å—ë –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å, ${final}. –ò –≤ –∏—Ö –≥–ª–∞–∑–∞—Ö –±–æ–ª—å—à–µ –Ω–µ –±—ã–ª–æ —Å—Ç—Ä–∞—Ö–∞.`,

        `üåå –≠—Ç–æ –±—ã–ª–æ ${when}, –≤ —Å–∞–º–æ–º —Å–µ—Ä–¥—Ü–µ ${where}. ${c1_short} –∏ ${c2_short} —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞–¥ —Ç–µ–º, —á—Ç–æ–±—ã ${what}, –Ω–æ –≤–¥—Ä—É–≥ –∏–∑ —Ç–µ–Ω–∏ –≤—ã—à–µ–ª –∫—Ç–æ-—Ç–æ‚Ä¶ ${twist}.

–°–Ω–∞—á–∞–ª–∞ –æ–±–∞ –∏—Å–ø—É–≥–∞–ª–∏—Å—å. –ù–æ –∑–∞—Ç–µ–º –≤—Å—ë –∏–∑–º–µ–Ω–∏–ª–æ—Å—å. –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —á—É–≤—Å—Ç–≤–∞ –ø—Ä–æ—Ä–≤–∞–ª–∏—Å—å –Ω–∞—Ä—É–∂—É.

${reaction}

‚Äî –ü–æ—á–µ–º—É —Ç—ã –º–æ–ª—á–∞–ª –≤—Å—ë —ç—Ç–æ –≤—Ä–µ–º—è? ‚Äî —Å–ø—Ä–æ—Å–∏–ª ${c2_short}.
‚Äî –ü–æ—Ç–æ–º—É —á—Ç–æ –±–æ—è–ª—Å—è –ø–æ—Ç–µ—Ä—è—Ç—å —Ç–µ–±—è, ‚Äî –æ—Ç–≤–µ—Ç–∏–ª ${c1_short}.

${c3_ins} –æ–∫–∞–∑–∞–ª—Å—è —Å–≤–∏–¥–µ—Ç–µ–ª–µ–º –∏—Ö –æ–±—ä—è—Ç–∏–π. –û–Ω –ª–∏—à—å –∫–∏–≤–Ω—É–ª —Å —É–ª—ã–±–∫–æ–π, –∞ –ø–æ—Ç–æ–º —É—à—ë–ª, –æ—Å—Ç–∞–≤–∏–≤ –∏—Ö –æ–¥–Ω–∏—Ö.

–§–∏–Ω–∞–ª –±—ã–ª –ø—Ä–æ—Å—Ç: ${final}. –ù–æ —á—É–≤—Å—Ç–≤–∞ ‚Äî –±—ã–ª–∏ —Å–ª–æ–∂–Ω–µ–µ —Å–ª–æ–≤.`
      ];

      const story = templates[Math.floor(Math.random() * templates.length)];
      document.getElementById("output").innerText = story;
    }
  </script>
</body>
</html>
