<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –§–∞–Ω—Ñ–∏–∫–∞</title>
  <style>
    body {
      background-color: #121212;
      color: #f5f5f5;
      font-family: sans-serif;
      padding: 40px 20px;
      margin: 0;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .form-container {
      max-width: 700px;
      margin: 0 auto;
    }

    label {
      display: block;
      margin-top: 20px;
      font-size: 18px;
    }

    input {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      box-sizing: border-box;
      border: none;
      border-radius: 8px;
      background-color: #1e1e1e;
      color: white;
      font-size: 16px;
    }

    button {
      margin-top: 30px;
      padding: 15px 30px;
      font-size: 18px;
      background-color: #03a9f4;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }

    .output {
      margin-top: 40px;
      background-color: #1e1e1e;
      padding: 25px;
      border-radius: 10px;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 24px;
      }
      label {
        font-size: 16px;
      }
      input, button {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–Ω—Ñ–∏–∫–∞</h1>

  <div class="form-container">
    <label>–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–æ–±—ã—Ç–∏—è?</label>
    <input type="text" id="when" />

    <label>–ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–æ–±—ã—Ç–∏—è?</label>
    <input type="text" id="where" />

    <label>–ß—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞–ª–∏?</label>
    <input type="text" id="what" />

    <label>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–≥–æ?</label>
    <input type="text" id="twist" />

    <label>–ß—Ç–æ –æ–Ω–∏ —Å–¥–µ–ª–∞–ª–∏ –≤ –∫–æ–Ω—Ü–µ?</label>
    <input type="text" id="final" />

    <button onclick="generateFanfic()">–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–Ω—Ñ–∏–∫</button>

    <div id="output" class="output"></div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const rawC1 = params.get('c1');
    const rawC2 = params.get('c2');

    function decline(name, form) {
      const cases = {
        "–°–µ—Ä–≥–µ–∏—á": {
          gen: "–°–µ—Ä–≥–µ–∏—á–∞", dat: "–°–µ—Ä–≥–µ–∏—á—É", acc: "–°–µ—Ä–≥–µ–∏—á–∞", ins: "–°–µ—Ä–≥–µ–∏—á–µ–º", abl: "–æ –°–µ—Ä–≥–µ–∏—á–µ", short: "–°–µ—Ä–≥–µ–∏—á" },
        "–ö–æ–ª—è –í–µ–Ω–¥–∏–Ω": {
          gen: "–ö–æ–ª–∏ –í–µ–Ω–¥–∏–Ω–∞", dat: "–ö–æ–ª–µ –í–µ–Ω–¥–∏–Ω—É", acc: "–ö–æ–ª—é –í–µ–Ω–¥–∏–Ω–∞", ins: "–ö–æ–ª–µ–π –í–µ–Ω–¥–∏–Ω—ã–º", abl: "–æ –ö–æ–ª–µ –í–µ–Ω–¥–∏–Ω–µ", short: "–ö–æ–ª—è" },
        "–°–∫—Ä—ã–≥–∞–Ω": {
          gen: "–°–∫—Ä—ã–≥–∞–Ω–∞", dat: "–°–∫—Ä—ã–≥–∞–Ω—É", acc: "–°–∫—Ä—ã–≥–∞–Ω–∞", ins: "–°–∫—Ä—ã–≥–∞–Ω–æ–º", abl: "–æ –°–∫—Ä—ã–≥–∞–Ω–µ", short: "–°–∫—Ä—ã–≥–∞–Ω" },
        "–ü–∏–ª–µ–ø–µ–Ω–∫–æ": {
          gen: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", dat: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", acc: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", ins: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", abl: "–æ –ü–∏–ª–µ–ø–µ–Ω–∫–æ", short: "–ü–∏–ª–µ–ø–µ–Ω–∫–æ" },
        "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–∞": {
          gen: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω—ã", dat: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–µ", acc: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω—É", ins: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–æ–π", abl: "–æ –ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–µ", short: "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–∞" }
      };
      return cases[name]?.[form] || name;
    }

    function getOtherCharacter(c1, c2) {
      const all = ["–°–µ—Ä–≥–µ–∏—á", "–ö–æ–ª—è –í–µ–Ω–¥–∏–Ω", "–°–∫—Ä—ã–≥–∞–Ω", "–ü–∏–ª–µ–ø–µ–Ω–∫–æ", "–ù–µ—Å—Ç–µ—Ä–æ–≤–Ω–∞"];
      return all.find(name => name !== c1 && name !== c2);
    }

    function generateFanfic() {
      const when = document.getElementById("when").value.trim();
      const where = document.getElementById("where").value.trim();
      const what = document.getElementById("what").value.trim();
      const twist = document.getElementById("twist").value.trim();
      const final = document.getElementById("final").value.trim();

      if (!when || !where || !what || !twist || !final) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
        return;
      }

      const c1 = rawC1;
      const c2 = rawC2;
      const c3 = getOtherCharacter(c1, c2);

      const c1_short = decline(c1, 'short');
      const c2_short = decline(c2, 'short');
      const c3_ins = decline(c3, 'ins');
      const c1_acc = decline(c1, 'acc');
      const c2_acc = decline(c2, 'acc');

      const story = `üìñ ${when}, –≤ ${where}, ${c1_short} –∏ ${c2_short} —Å–æ–±—Ä–∞–ª–∏—Å—å ${what}. –ö–∞–∑–∞–ª–æ—Å—å –±—ã ‚Äî –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å, –Ω–∏—á–µ–º –Ω–µ –æ—Ç–ª–∏—á–∞—é—â–∏–π—Å—è –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö. –ù–æ –≤—Å—ë –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å–ª–µ–¥—É—é—â–µ–µ: ${twist}.

–°–Ω–∞—á–∞–ª–∞ –æ–Ω–∏ –Ω–µ –ø—Ä–∏–¥–∞–ª–∏ —ç—Ç–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—è. –ù–æ –ø–æ—Ç–æ–º –∏—Ö –≤–∑–≥–ª—è–¥—ã —Å—Ç–∞–ª–∏ —á–∞—â–µ –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è. –°–ª–æ–≤–Ω–æ –±—ã —Ç–æ, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å, —Å–¥–≤–∏–Ω—É–ª–æ –Ω–µ—á—Ç–æ –≥–ª—É–±–æ–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ.

‚Äî –¢—ã —ç—Ç–æ —Ç–æ–∂–µ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª? ‚Äî —Å–ø—Ä–æ—Å–∏–ª ${c1_short}, –ø—Ä–µ—Ä–≤–∞–≤ —Ç–∏—à–∏–Ω—É.
‚Äî –î–∞, –∏ —è –±–æ–ª—å—à–µ –Ω–µ —Ö–æ—á—É —ç—Ç–æ —Å–∫—Ä—ã–≤–∞—Ç—å, ‚Äî –æ—Ç–≤–µ—Ç–∏–ª ${c2_short}, –ø–æ–¥—Ö–æ–¥—è –±–ª–∏–∂–µ.

–ò—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä –ø–µ—Ä–µ—Ç—ë–∫ –≤ –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ. –°—Ç–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —Ç–∞–∫ –¥–æ–ª–≥–æ —Å—Ç—Ä–æ–∏–ª–∏, —Ä—É—Ö–Ω—É–ª–∏ –∑–∞ —Å—á–∏—Ç–∞–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã. –ù–∞—Å—Ç—É–ø–∏–ª–∞ –ø–∞—É–∑–∞, –Ω–æ –≤ –Ω–µ–π –±—ã–ª–æ –±–æ–ª—å—à–µ —Å–º—ã—Å–ª–∞, —á–µ–º –≤ —Å–æ—Ç–Ω–µ —Å–ª–æ–≤. –ò —Ç–æ–≥–¥–∞, –Ω–µ —Å–≥–æ–≤–∞—Ä–∏–≤–∞—è—Å—å, –æ–Ω–∏ –ø–æ—Ü–µ–ª–æ–≤–∞–ª–∏—Å—å.

–ò–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –≤ –∫–æ–º–Ω–∞—Ç—É –≤–æ—à—ë–ª ${c3_ins}. –û–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è, —É–¥–∏–≤–ª—ë–Ω–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª, –∏ –≤–¥—Ä—É–≥ —É–ª—ã–±–Ω—É–ª—Å—è:
‚Äî –Ø –∑–Ω–∞–ª, —á—Ç–æ –º–µ–∂–¥—É –≤–∞–º–∏ –Ω–µ—á—Ç–æ –±–æ–ª—å—à–µ–µ.

–í–µ—á–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∏–ª—Å—è –ø—Ä–∏–∑–Ω–∞–Ω–∏—è–º–∏, –¥–æ–ª–≥–∏–º–∏ –æ–±—ä—è—Ç–∏—è–º–∏, —Å–º–µ—Ö–æ–º –∏ —Ç–∏—Ö–∏–º–∏ –æ–±–µ—â–∞–Ω–∏—è–º–∏. ${c1_short} –∏ ${c2_short} –∑–Ω–∞–ª–∏: —Ç–µ–ø–µ—Ä—å –≤—Å—ë –±—É–¥–µ—Ç –ø–æ-–¥—Ä—É–≥–æ–º—É. –ò –≤ –∫–æ–Ω—Ü–µ, ${final}. –û–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ –ø—Ä—è—Ç–∞–ª–∏—Å—å –æ—Ç –º–∏—Ä–∞ ‚Äî –∏, –≥–ª–∞–≤–Ω–æ–µ, –æ—Ç —Å–∞–º–∏—Ö —Å–µ–±—è.`;

      document.getElementById("output").innerText = story;
    }
  </script>
</body>
</html>